 /* 
 * Copyright 2011 DoAT. All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, are
 * permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this list of
 *      conditions and the following disclaimer.
 *
 *   2. Redistributions in binary form must reproduce the above copyright notice, this list
 *      of conditions and the following disclaimer in the documentation and/or other materials
 *      provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY Do@ ``AS IS'' AND ANY EXPRESS OR IMPLIED
 * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * The views and conclusions contained in the software and documentation are those of the
 * authors and should not be interpreted as representing official policies, either expressed
 * or implied, of DoAT.
 */
 
 (function(){var A=function(){var D=this,F={};this.addEventListener=function(I,G){var H=F[I];if(!H){F[I]={callbacks:[],enabled:false};H=F[I]}H.callbacks.push(G);if(H.enabled&&H.callOnce){E(G)}};this.dispatchEvent=function(K,I){var H=F[K];if(!H){F[K]={callbacks:[],enabled:true};H=F[K]}else{var G=H.callbacks.length;for(var J=0;J<G;++J){E(H.callbacks[J])}}if(I){l(H,I)}};var E=function(G){G()};this.ready=function(G){D.addEventListener("ready",G)};this.focused=function(G){D.addEventListener("focused",G)};this.blurred=function(G){D.addEventListener("blurred",G)};this.hidden=function(G){D.addEventListener("hidden",G)};this.visible=function(G){D.addEventListener("visible",G)};this.NO_RESULTS="no results";this.RENDER_START="render start";this.RENDER_END="render end";this.RENDER_VISIBLE_END="render visible end";this.SEARCH_START="search request";this.SEARCH_END="search response success";this.SEARCH_ERROR="search response error";this.WINDOW_LOADED="window loaded";this.DOAT_READY="doat ready";this.DOCUMENT_READY="document ready";this.USER_ACTION="user action";this.PAGE_VIEW="page view";this.ready(function(){F.ready.enabled=true});this.focused(function(){F.focused.enabled=true;F.visible.enabled=F.hidden.enabled=F.blurred.enabled=false});this.visible(function(){F.visible.enabled=true;F.focused.enabled=F.hidden.enabled=F.blurred.enabled=false});this.hidden(function(){F.hidden.enabled=true;F.focused.enabled=F.visible.enabled=F.blurred.enabled=false});this.blurred(function(){F.blurred.enabled=true;F.focused.enabled=F.visible.enabled=F.hidden.enabled=false})};function C(I){var O=this,N,L,D="orientation-",J=new RegExp(D+"[^s]*","g"),E=I&&I.isTouch||("ontouchstart" in window);window.addEventListener("orientationchange",M,false);window.addEventListener("load",M,false);var F=function(Q){Q=(Q||navigator.userAgent).toLowerCase();N={};N.platform=K(Q);N.browser=G(Q);N.os=P(Q);N.screen=H()};var K=function(S){var T="",R="",Q;Q=/(iphone|ipad)|(android)|(symbian)|(webOSos)|(windows phone os)/.exec(S)||[];T=Q[1]||Q[2]&&""||Q[3]&&"nokia"||Q[4]&&"blackberry"||Q[5]&&""||"desktop";return{name:T,version:R}};var P=function(S){var T="",R="",Q;Q=/(iphone|ipad)|(android|symbian|webos)|(windows phone os)/.exec(S)||[];T=Q[1]&&"ios"||Q[2]||Q[3]&&"windowsphoneos";if(!T){Q=/(Win32)|(Linux)|(MacIntel)/.exec(navigator.platform)||[];T=Q[1]&&"windows"||Q[2]||Q[3]&&"mac"||""}switch(T){case"ios":R=/os\s([\d_]+)\slike/.exec(S);R=R[1].replace(/_/g,".");break;case"android":R=/android\s([\d\.\-]+)[^;]*;/.exec(S);R=R[1].replace(/-/g,"");break}return{name:T,version:R}};var G=function(S){var T,R="",Q;S=S.toLowerCase();Q=/(webkit)[ \/]([\w.]+)/.exec(S)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(S)||/(msie) ([\w.]+)/.exec(S)||S.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(S)||[];T=Q[1]||"";return{name:T,version:R}};var H=function(){var Q="",R="";if(window.innerHeight){Q=window.innerWidth;R=window.innerHeight}else{if(window.screen&&window.screen.availHeight){Q=window.screen.availWidth;R=window.screen.availHeight}}return{width:Q,height:R}};function M(){switch(window.orientation){case 90:o="landscape-right";break;case -90:o="landscape-left";break;default:o="portrait"}document.body.className=document.body.className.replace(J,"")+" "+D+o}this.isTouch=function(){return E};this.isMobile=function(R){var Q=O.getInfo(R).platform.name;return I&&I.isTouch||/^(iphone|ipad|android|symbian|webos|windowsphoneos)$/.test(Q)};this.getInfo=function(){if(arguments[0]||!N){var Q=(arguments[0]===true)?undefined:arguments[0];F(Q)}return N};this.addEventListener=function(){if(typeof arguments[0]==="string"){arguments[2]=arguments[1];arguments[1]=arguments[0];arguments[0]=document}var Q=arguments[0],X=arguments[1],S=arguments[2],V=O.isMobile()?"touchstart":"mousedown",W=O.isMobile()?"touchmove":"mousemove",Y=O.isMobile()?"touchend":"mouseup";switch(X){case"swipeX":r(Q,"swipeX",S);break;case"touch":var U,T,R=false;r(Q,V,function(Z){Z=Z.originalEvent||Z;U={type:"start",position:{x:Z.touches?Z.touches[0].pageX:Z.clientX,y:Z.touches?Z.touches[0].pageY:Z.clientY}};S(Z,U);R=true});r(document,W,function(Z){if(!R){return false}Z=Z.originalEvent||Z;T={type:"move",position:{x:Z.touches?Z.touches[0].pageX:Z.clientX,y:Z.touches?Z.touches[0].pageY:Z.clientY}};T.delta={x:T.position.x-U.position.x,y:T.position.y-U.position.y};S(Z,T)});r(document,Y,function(aa){R=false;if(!T||T.delta.x===0&&T.delta.y===0){return false}aa=aa.originalEvent||aa;var Z={type:"end",position:T.position,delta:T.delta,swipeEvent:true,direction:(T.delta.x>0)?"ltr":"rtl"};S(aa,Z);T=undefined});break}}}function c(){var G="http://doatresizer.appspot.com/?url={src}&width={width}&height={height}&cache=short&crop={crop}",F={searchbar:{type:"replace",html:'<div><form id="tml-searchbar-form" onsubmit="{onsubmit}();TouchyJS.Searchbar.onSubmit();return false;" ><input type="text" value="{defaulttext}" onfocus="TouchyJS.Searchbar.clearValue(\'{defaulttext}\')" onblur="TouchyJS.Searchbar.fillValue(\'{defaulttext}\')" id="tml-searchbar-searchfield" name="searchfield" style="{style}" clearbutton={clearbutton}/></form></div>'},navigate:{type:"replace",html:'<a href="javascript://" class="{class}" onclick="TouchyJS.Nav.goTo(\'{to}\')"><span>{label}</span></a>'},image:{type:"image",html:'<img src="'+G+'" alt="{alt}" />'}},I="tml",J={autoinit:"false"};var H=/\{([^}]*)\}/g;var D=function(L,M){var K={};return M?(""+M).replace(H,function(N,O){if(!K.hasOwnProperty(O)){K[O]=L.getAttribute(O)?L.getAttribute(O):J.hasOwnProperty(O)?J[O]:""}return K[O]}):M};var E=function(K,M){if($(K).replaceWith){$(K).replaceWith($(M))}else{var L=$(M)[0];K.parentNode.replaceChild(L,K)}};this.parse=function(L){!L&&(L=document.body);for(var O in F){if(F.hasOwnProperty(O)){var K=I+":"+O;var N=L.getElementsByTagName(K);for(var M=0;M<N.length;M++){var P=D(N[M],F[O].html);E(N[M],P);M--}}}};this.getImage=function(K){var L=new function(M){this.getAttribute=function(N){return M[N]}}(K);return D(L,G)}}var a=function(K){var N,F;this.autoinit=O;this.clearValue=I;this.fillValue=M;this.setValue=E;this.getValue=H;this.getInputElement=L;this.onSubmit=J;this.blur=D;this.focus=Q;j.Events.ready(P);function P(){N=document.getElementById("tml-searchbar-searchfield");if(K&&K.searchClearButton){G(K)}}function G(R){if(L().getAttribute("clearbutton")!==""){F=new w();var S=R&&R.css||{};!S.left&&(S.left=N.offsetWidth);buttonEl=F.init({css:S,onClick:function(){E("");Q()}});var T=L().parentNode;T.style.position="relative";T.appendChild(buttonEl)}}function I(R){if(R===""){return}if(H()===R){E("")}}function M(R){if(R===""){return}if(H()===""){E(R)}}function Q(){N.focus()}function D(){N.blur()}function E(R){N.value=R}function H(){return N.value}function L(){return N}function O(R){E(j.getSearchQuery());R.call(this)}function J(){D()}};function w(){var E,D={position:"absolute",top:"5px",cursor:"pointer","background-color":"#BBBBBB",width:"16px",height:"16px","text-align":"center","line-height":"17px","border-radius":"8px","-webkitborder-radius":"8px","-moz-border-radius":"8px",color:"white","font-weight":"bold","font-size":"12px","font-family":"arial","text-shadow":"none",leftOffset:-19};this.init=function(F){for(i in F.css){D[i]=F.css[i]}D.left=D.left+D.leftOffset+"px";E=$("<span/>");E.addClass("tml-searchbar-clear").html("X").css(D).click(function(G){G.preventDefault();F.onClick()});return E[0]};this.show=function(){E.show()};this.hide=function(){E.hide()}}var q=function(){var X,M,V,U,Q,O,W,J,N,K,E,S,P;this.init=function(aa){var ad;if(aa&&aa.id&&document.getElementById(aa.id)){ad=$("#"+aa.id)}else{return false}if(typeof j!=="undefined"){M=j.Env.isMobile();var Z=j.Env.getInfo().browser;V=Z==="webkit"?"-webkit-":Z==="mozilla"?"-moz-":""}else{M=("ontouchstart" in window)}K=aa.trackWidth;P=aa.onSelect;W=M?"touchstart":"mousedown";J=M?"touchmove":"mousemove";N=M?"touchend":"mouseup";X=$('<div class="tml-slider" />');ad.parent().append(X);X.append(ad);var ae=[];ad.children().each(function(){var af=$("<div/>");$(this).appendTo(af);ae.push(af.html())});itemArrLength=ae.length;S=K/itemArrLength;var Y=$('<div class="wrapper">');Y.css("width",K+"px");X.append(Y);$eventCaptureEl=$('<div class="eventCapture" />');$eventCaptureEl.css("width",K+"px");$eventCaptureEl.bind(W,H,false);document.addEventListener(N,D,false);Y.append($eventCaptureEl);handleWrapper=new R();var ab=handleWrapper.init();Y.append(ab);O=new G();var ac=O.init(ae);ab.append(ac);return true};var H=function(Z){document.addEventListener(J,I,false);var aa=T(Z);var Y=F(aa);if(Y!==E){E=Y;O.update(E)}handleWrapper.update(aa,E);O.show()};var I=function(Z){Z.preventDefault(Z);var aa=T(Z);if(aa<=K&&aa>=0){var Y=F(aa);if(Y!==E){E=Y;O.update(E)}handleWrapper.onTouchMove();handleWrapper.update(aa,E)}};var D=function(Y){handleWrapper.onTouchEnd();document.removeEventListener(J,I);var Z=L(E);handleWrapper.update(Z);O.hide();if(P){P(E)}};var F=function(Z){var Y=(Z/K)*itemArrLength;Y=parseInt(Y,10);return Y};var T=function(Y){Y=Y.touches&&Y.touches[0]||Y.originalEvent&&Y.originalEvent.touches&&Y.originalEvent.touches[0]||Y;return Y.clientX};var L=function(Y){return Y*S};function R(){var Y;this.init=function(aa){Y=$('<div class="handle_wrapper"><div class="handle"/></div>');return Y};this.update=function(aa){Z(aa)};this.onTouchMove=function(){Y.addClass("dragged")};this.onTouchEnd=function(){Y.removeClass("dragged")};var Z=function(aa){Y.css(V+"transform","translateX("+aa+"px)")}}function G(){var Z=this;var aa,Y,ac,ab;this.init=function(ad){ab=ad;aa=$('<div class="preview"/>');Y=$('<div class="content"/>');aa.append(Y);ac=$('<span class="indicator"/>');aa.append(ac);Z.hide();return aa};this.show=function(){aa.addClass("displayed")};this.update=function(ad){Y.html(ab[ad]);ac.html(ad+1+" of "+ab.length)};this.hide=function(){aa.removeClass("displayed")}}};function B(){var Z=null,N=null,L=null,P=null;var O=0,M=0,K=false,I=true,J=false;var D=320,H=0,T=5,W=0,F=null;var X="0.5",E=4000;var Q=this;this.init=function(ab){ab=ab||{};Z=ab.element||null;N=ab.navElement||null;L=ab.itemsElement||null;P=ab.onSelect||null;ab.itemWidth&&(D=ab.itemWidth);ab.thumbWidth&&(H=ab.thumbWidth);ab.numVisibleThumbs&&(T=ab.numVisibleThumbs);ab.animationSpeed&&(X=ab.animationSpeed);ab.autoplay&&(typeof ab.autoplay=="number")&&(E=ab.autoplay);I=(typeof ab.stopAutoplayOnTouch=="boolean")?ab.stopAutoplayOnTouch:true;J=(typeof ab.thumbsSwipe=="boolean")?ab.thumbsSwipe:false;onHitStartArr=[],onHitEndArr=[],onHitStart=function(){onHitStartArr.forEach(function(ac){ac.apply(arguments)})};onHitEnd=function(){onHitEndArr.forEach(function(ac){ac.apply(arguments)})};ab.onHitStartCallback&&onHitStartArr.push(ab.onHitStartCallback);ab.onHitEndCallback&&onHitEndArr.push(ab.onHitEndCallback);W=L.find("li").length;R();S();if(N){var aa=N.find("li");aa.click(function(){Q.setItemByThumb(this)});$(aa[0]).addClass("active")}V();if(ab.autoplay){Q.autoplayStart();if(ab.stopAutoplayOnFocus){j.Events.focused(function(){Q.autoplayStop()});j.Events.blurred(function(){Q.autoplayStart()})}}};function S(){var aa=L.parent().get(0);j.Env.addEventListener(aa,"touch",function(ac,ab){switch(ab.type){case"start":Y(L);I&&Q.autoplayStop();break;case"move":Q.move(ab.delta.x);break;case"end":if(!ab.swipeEvent){Q.showCurrentItem()}else{ac=ac.originalEvent||ac;ac.preventDefault();G(L);if(ab.direction=="rtl"){Q.next()}else{Q.prev()}}break}});if(N&&J){aa=N.parent().get(0);j.Env.addEventListener(aa,"touch",function(ac,ab){switch(ab.type){case"start":Y(N);I&&Q.autoplayStop();break;case"move":Q.moveTabs(ab.delta.x);break;case"end":if(!ab.swipeEvent){Q.showCurrentItem(true)}else{ac=ac.originalEvent||ac;ac.preventDefault();G(N);if(ab.direction=="rtl"){Q.nextTabs()}else{Q.prevTabs()}}break}})}$(document).bind("keyup",function(ab){if(K){switch(ab.keyCode){case 36:I&&Q.autoplayStop();Q.setItem(0);break;case 35:I&&Q.autoplayStop();Q.setItem(W-1);break;case 39:I&&Q.autoplayStop();Q.next();break;case 37:I&&Q.autoplayStop();Q.prev();break}}})}function R(){U(Z);U(N);U(L);L.parent().css({width:D+"px",overflow:"hidden"});L.find("li").css({"float":"left",width:D+"px"});L.css({width:(D*W)+"px","list-style-type":"none",overflow:"hidden"});if(N&&H!==0){N.css({width:(H*W)+"px","list-style-type":"none",overflow:"hidden"})}}this.autoplayStart=function(){if(F!==null){Q.autoplayStop()}F=setInterval(function(){Q.next(true)},E)};this.autoplayStop=function(){clearInterval(F);F=null};this.show=function(aa){if(aa&&aa.delay){setTimeout(V,aa.delay)}else{V()}};this.hide=function(){Z.hide();K=false};function V(){Z.show();K=true}this.removeItem=function(ac){var ab=(typeof ac=="number")?L.children()[ac]:ac;var aa=Q.index(ab);$(ab).remove();N&&$(N.children()[aa]).remove();W--;if(O==aa){O--;if(O<=0){O=0}}Q.showCurrentItem()};this.move=function(aa){L.css({"-webkit-transform":"translate("+-(O*D-aa)+"px)","-moz-transform":"translate("+-(O*D-aa)+"px)",transform:"translate("+-(O*D-aa)+"px)"})};this.moveTabs=function(aa){N&&N.css({"-webkit-transform":"translate("+-(M*H-aa)+"px)","-moz-transform":"translate("+-(M*H-aa)+"px)",transform:"translate("+-(M*H-aa)+"px)"})};this.prev=function(){O--;if(O<0){O=0;onHitStart()}Q.showCurrentItem()};this.next=function(aa){O++;if(O==W){O=(aa)?0:W-1;onHitEnd()}Q.showCurrentItem()};this.prevTabs=function(){M-=T;if(M<=0){M=0}Q.showCurrentItem(true)};this.nextTabs=function(){M+=T;if(M>=W-T){M=W-T}Q.showCurrentItem(true)};this.setItemByThumb=function(aa){Q.setItem(Q.index(aa))};this.index=function(ac){ac=$(ac);var aa=ac.parent().children();for(var ab=0;ab<aa.length;ab++){if(aa[ab]==ac[0]){return ab}}return -1};this.setItem=function(aa){O=aa;Q.showCurrentItem()};this.showCurrentItem=function(ad){var ac=(ad&&N)?N:L;var aa=(ad&&N)?-(M*H):-(O*D);G(ac);ac.css({"-webkit-transform":"translate("+aa+"px)","-moz-transform":"translate("+aa+"px)",transform:"translate("+aa+"px)"});P&&P(O);L.find(".active").removeClass("active");$(L.children("li")[O]).addClass("active");if(N){N.find(".active").removeClass("active");$(N.children("li")[O]).addClass("active")}if(!ad){var ab=Math.floor(O/T)*T;if(ab!=M){M=ab;Q.showCurrentItem(true)}}};function Y(aa){aa.css({"-moz-transition":"-moz-transform 0s","-webkit-transition":"-webkit-transform 0s",transition:"transform 0s"})}function G(aa){aa&&aa.css({"-moz-transition":" -moz-transform "+X+"s ease-out","-webkit-transition":"-webkit-transform "+X+"s ease-out",transition:"transform "+X+"s ease-out"})}function U(aa){aa&&aa.css({"-webkit-transform":"translate3d(0px, 0px, 0px) rotate(0deg) scale(1)","-webkit-box-sizing":"border-box","-webkit-backface-visibility":"hidden"})}}
/*!
 * iScroll Lite base on iScroll v4.1.6 ~ Copyright (c) 2011 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(){var Q=Math,U=(/webkit/i).test(navigator.appVersion)?"webkit":(/firefox/i).test(navigator.userAgent)?"Moz":"opera" in window?"O":"",M="WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix(),T="ontouchstart" in window,H=U+"Transform" in document.documentElement.style,K=(/iphone|ipad/gi).test(navigator.appVersion),F=(/playbook/gi).test(navigator.appVersion),I=K||F,O=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(V){return setTimeout(V,17)}})(),N=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout})(),J="onorientationchange" in window?"orientationchange":"resize",D=T?"touchstart":"mousedown",P=T?"touchmove":"mousemove",G=T?"touchend":"mouseup",S=T?"touchcancel":"mouseup",E="translate"+(M?"3d(":"("),L=M?",0)":")",R=function(X,V){var Y=this,Z=document,W;Y.wrapper=typeof X=="object"?X:Z.getElementById(X);Y.wrapper.style.overflow="hidden";Y.scroller=Y.wrapper.children[0];Y.options={hScroll:true,vScroll:true,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,onRefresh:null,onBeforeScrollStart:function(aa){aa.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(W in V){Y.options[W]=V[W]}Y.options.useTransform=H?Y.options.useTransform:false;Y.options.hScrollbar=Y.options.hScroll&&Y.options.hScrollbar;Y.options.vScrollbar=Y.options.vScroll&&Y.options.vScrollbar;Y.options.useTransition=I&&Y.options.useTransition;Y.scroller.style[U+"TransitionProperty"]=Y.options.useTransform?"-"+U.toLowerCase()+"-transform":"top left";Y.scroller.style[U+"TransitionDuration"]="0";Y.scroller.style[U+"TransformOrigin"]="0 0";if(Y.options.useTransition){Y.scroller.style[U+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"}if(Y.options.useTransform){Y.scroller.style[U+"Transform"]=E+"0,0"+L}else{Y.scroller.style.cssText+=";position:absolute;top:0;left:0"}Y.refresh();Y._bind(J,window);Y._bind(D);if(!T){Y._bind("mouseout",Y.wrapper)}};R.prototype={enabled:true,x:0,y:0,steps:[],scale:1,handleEvent:function(W){var V=this;switch(W.type){case D:if(!T&&W.button!==0){return}V._start(W);break;case P:V._move(W);break;case G:case S:V._end(W);break;case J:V._resize();break;case"mouseout":V._mouseout(W);break;case"webkitTransitionEnd":V._transitionEnd(W);break}},_resize:function(){this.refresh()},_pos:function(V,W){V=this.hScroll?V:0;W=this.vScroll?W:0;if(this.options.useTransform){this.scroller.style[U+"Transform"]=E+V+"px,"+W+"px"+L+" scale("+this.scale+")"}else{V=Q.round(V);W=Q.round(W);this.scroller.style.left=V+"px";this.scroller.style.top=W+"px"}this.x=V;this.y=W},_start:function(Z){var Y=this,W=T?Z.touches[0]:Z,X,V,aa;if(!Y.enabled){return}if(Y.options.onBeforeScrollStart){Y.options.onBeforeScrollStart.call(Y,Z)}if(Y.options.useTransition){Y._transitionTime(0)}Y.moved=false;Y.animating=false;Y.zoomed=false;Y.distX=0;Y.distY=0;Y.absDistX=0;Y.absDistY=0;Y.dirX=0;Y.dirY=0;if(Y.options.momentum){if(Y.options.useTransform){X=getComputedStyle(Y.scroller,null)[U+"Transform"].replace(/[^0-9-.,]/g,"").split(",");V=X[4]*1;aa=X[5]*1}else{V=getComputedStyle(Y.scroller,null).left.replace(/[^0-9-]/g,"")*1;aa=getComputedStyle(Y.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(V!=Y.x||aa!=Y.y){if(Y.options.useTransition){Y._unbind("webkitTransitionEnd")}else{N(Y.aniTime)}Y.steps=[];Y._pos(V,aa)}}Y.absStartX=Y.x;Y.absStartY=Y.y;Y.startX=Y.x;Y.startY=Y.y;Y.pointX=W.pageX;Y.pointY=W.pageY;Y.startTime=Z.timeStamp||Date.now();if(Y.options.onScrollStart){Y.options.onScrollStart.call(Y,Z)}Y._bind(P);Y._bind(G);Y._bind(S)},_move:function(ab){var Y=this,W=T?ab.touches[0]:ab,X=W.pageX-Y.pointX,V=W.pageY-Y.pointY,ac=Y.x+X,aa=Y.y+V,Z=ab.timeStamp||Date.now();if(Y.options.onBeforeScrollMove){Y.options.onBeforeScrollMove.call(Y,ab)}Y.pointX=W.pageX;Y.pointY=W.pageY;if(ac>0||ac<Y.maxScrollX){ac=Y.options.bounce?Y.x+(X/2):ac>=0||Y.maxScrollX>=0?0:Y.maxScrollX}if(aa>0||aa<Y.maxScrollY){aa=Y.options.bounce?Y.y+(V/2):aa>=0||Y.maxScrollY>=0?0:Y.maxScrollY}if(Y.absDistX<6&&Y.absDistY<6){Y.distX+=X;Y.distY+=V;Y.absDistX=Q.abs(Y.distX);Y.absDistY=Q.abs(Y.distY);return}if(Y.options.lockDirection){if(Y.absDistX>Y.absDistY+5){aa=Y.y;V=0}else{if(Y.absDistY>Y.absDistX+5){ac=Y.x;X=0}}}Y.moved=true;Y._pos(ac,aa);Y.dirX=X>0?-1:X<0?1:0;Y.dirY=V>0?-1:V<0?1:0;if(Z-Y.startTime>300){Y.startTime=Z;Y.startX=Y.x;Y.startY=Y.y}if(Y.options.onScrollMove){Y.options.onScrollMove.call(Y,ab)}},_end:function(ab){if(T&&ab.touches.length!=0){return}var Z=this,af=T?ab.changedTouches[0]:ab,ac,ae,X={dist:0,time:0},V={dist:0,time:0},Y=(ab.timeStamp||Date.now())-Z.startTime,ad=Z.x,aa=Z.y,W;Z._unbind(P);Z._unbind(G);Z._unbind(S);if(Z.options.onBeforeScrollEnd){Z.options.onBeforeScrollEnd.call(Z,ab)}if(!Z.moved){if(T){ac=af.target;while(ac.nodeType!=1){ac=ac.parentNode}if(ac.tagName!="SELECT"&&ac.tagName!="INPUT"&&ac.tagName!="TEXTAREA"){ae=document.createEvent("MouseEvents");ae.initMouseEvent("click",true,true,ab.view,1,af.screenX,af.screenY,af.clientX,af.clientY,ab.ctrlKey,ab.altKey,ab.shiftKey,ab.metaKey,0,null);ae._fake=true;ac.dispatchEvent(ae)}}Z._resetPos(200);if(Z.options.onTouchEnd){Z.options.onTouchEnd.call(Z,ab)}return}if(Y<300&&Z.options.momentum){X=ad?Z._momentum(ad-Z.startX,Y,-Z.x,Z.scrollerW-Z.wrapperW+Z.x,Z.options.bounce?Z.wrapperW:0):X;V=aa?Z._momentum(aa-Z.startY,Y,-Z.y,(Z.maxScrollY<0?Z.scrollerH-Z.wrapperH+Z.y:0),Z.options.bounce?Z.wrapperH:0):V;ad=Z.x+X.dist;aa=Z.y+V.dist;if((Z.x>0&&ad>0)||(Z.x<Z.maxScrollX&&ad<Z.maxScrollX)){X={dist:0,time:0}}if((Z.y>0&&aa>0)||(Z.y<Z.maxScrollY&&aa<Z.maxScrollY)){V={dist:0,time:0}}}if(X.dist||V.dist){W=Q.max(Q.max(X.time,V.time),10);Z.scrollTo(ad,aa,W);if(Z.options.onTouchEnd){Z.options.onTouchEnd.call(Z,ab)}return}Z._resetPos(200);if(Z.options.onTouchEnd){Z.options.onTouchEnd.call(Z,ab)}},_resetPos:function(X){var V=this,Y=V.x>=0?0:V.x<V.maxScrollX?V.maxScrollX:V.x,W=V.y>=0||V.maxScrollY>0?0:V.y<V.maxScrollY?V.maxScrollY:V.y;if(Y==V.x&&W==V.y){if(V.moved){if(V.options.onScrollEnd){V.options.onScrollEnd.call(V)}V.moved=false}return}V.scrollTo(Y,W,X||0)},_mouseout:function(W){var V=W.relatedTarget;if(!V){this._end(W);return}while(V=V.parentNode){if(V==this.wrapper){return}}this._end(W)},_transitionEnd:function(W){var V=this;if(W.target!=V.scroller){return}V._unbind("webkitTransitionEnd");V._startAni()},_startAni:function(){var ab=this,W=ab.x,V=ab.y,Z=Date.now(),aa,Y;if(ab.animating){return}if(!ab.steps.length){ab._resetPos(400);return}aa=ab.steps.shift();if(aa.x==W&&aa.y==V){aa.time=0}ab.animating=true;ab.moved=true;if(ab.options.useTransition){ab._transitionTime(aa.time);ab._pos(aa.x,aa.y);ab.animating=false;if(aa.time){ab._bind("webkitTransitionEnd")}else{ab._resetPos(0)}return}(function X(){var ac=Date.now(),ae,ad;if(ac>=Z+aa.time){ab._pos(aa.x,aa.y);ab.animating=false;if(ab.options.onAnimationEnd){ab.options.onAnimationEnd.call(ab)}ab._startAni();return}ac=(ac-Z)/aa.time-1;Y=Q.sqrt(1-ac*ac);ae=(aa.x-W)*Y+W;ad=(aa.y-V)*Y+V;ab._pos(ae,ad);if(ab.animating){ab.aniTime=O(X)}})()},_transitionTime:function(V){this.scroller.style[U+"TransitionDuration"]=V+"ms"},_momentum:function(ac,W,aa,V,ae){var ab=0.0006,X=Q.abs(ac)/W,Y=(X*X)/(2*ab),ad=0,Z=0;if(ac>0&&Y>aa){Z=ae/(6/(Y/X*ab));aa=aa+Z;X=X*aa/Y;Y=aa}else{if(ac<0&&Y>V){Z=ae/(6/(Y/X*ab));V=V+Z;X=X*V/Y;Y=V}}Y=Y*(ac<0?-1:1);ad=X/ab;return{dist:Y,time:Q.round(ad)}},_offset:function(V){var X=-V.offsetLeft,W=-V.offsetTop;while(V=V.offsetParent){X-=V.offsetLeft;W-=V.offsetTop}return{left:X,top:W}},_bind:function(X,W,V){(W||this.scroller).addEventListener(X,this,!!V)},_unbind:function(X,W,V){(W||this.scroller).removeEventListener(X,this,!!V)},destroy:function(){var V=this;V.scroller.style[U+"Transform"]="";V._unbind(J,window);V._unbind(D);V._unbind(P);V._unbind(G);V._unbind(S);V._unbind("mouseout",V.wrapper);if(V.options.useTransition){V._unbind("webkitTransitionEnd")}if(V.options.onDestroy){V.options.onDestroy.call(V)}},refresh:function(){var V=this,W;V.wrapperW=V.wrapper.clientWidth;V.wrapperH=V.wrapper.clientHeight;V.scrollerW=V.scroller.offsetWidth;V.scrollerH=V.scroller.offsetHeight;V.maxScrollX=V.wrapperW-V.scrollerW;V.maxScrollY=V.wrapperH-V.scrollerH;V.dirX=0;V.dirY=0;V.hScroll=V.options.hScroll&&V.maxScrollX<0;V.vScroll=V.options.vScroll&&(!V.options.bounceLock&&!V.hScroll||V.scrollerH>V.wrapperH);W=V._offset(V.wrapper);V.wrapperOffsetLeft=-W.left;V.wrapperOffsetTop=-W.top;V.scroller.style[U+"TransitionDuration"]="0";V._resetPos(200)},scrollTo:function(V,ac,ab,aa){var Z=this,Y=V,X,W;Z.stop();if(!Y.length){Y=[{x:V,y:ac,time:ab,relative:aa}]}for(X=0,W=Y.length;X<W;X++){if(Y[X].relative){Y[X].x=Z.x-Y[X].x;Y[X].y=Z.y-Y[X].y}Z.steps.push({x:Y[X].x,y:Y[X].y,time:Y[X].time||0})}Z._startAni()},scrollToElement:function(V,X){var W=this,Y;V=V.nodeType?V:W.scroller.querySelector(V);if(!V){return}Y=W._offset(V);Y.left+=W.wrapperOffsetLeft;Y.top+=W.wrapperOffsetTop;Y.left=Y.left>0?0:Y.left<W.maxScrollX?W.maxScrollX:Y.left;Y.top=Y.top>0?0:Y.top<W.maxScrollY?W.maxScrollY:Y.top;X=X===undefined?Q.max(Q.abs(Y.left)*2,Q.abs(Y.top)*2):X;W.scrollTo(Y.left,Y.top,X)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(P);this._unbind(G);this._unbind(S)},enable:function(){this.enabled=true},stop:function(){N(this.aniTime);this.steps=[];this.moved=false;this.animating=false}};if(typeof exports!=="undefined"){exports.iScroll=R}else{window.iScroll=R}})();function z(){var K=this,P,L,E,D,R,J=[],M,S,F=document.getElementsByTagName("head")[0],H={vScrollbar:true,hScroll:false},G;window.addEventListener("orientationchange",I,false);var O=function(){var V=$("."+E);return(V.length>0)};var Q=function(){if(T()){P.Log&&P.Log.info(P.Env.getInfo().platform+" "+P.Env.getInfo().version+" has fixed positioning so using position: fixed");S.css({position:"fixed",top:0,left:0,width:"100%","z-index":2});$contents.css({top:S.get(0).offsetHeight+"px",height:"auto","z-index":1})}else{P.Log&&P.Log.info(P.Env.getInfo().platform+" "+P.Env.getInfo().version+" has NO fixed positioning so using iScroll");if(J.length==0){document.body.addEventListener("touchmove",function(ae){},false)}for(var Y=0,ab=$contents.length;Y<ab;Y++){var W=$contents[Y];var ad=$(W);var V=W.getAttribute("id");if(J[V]){J[V].refresh.call(J[V])}else{if(!(G.disableIScroll&&G.disableIScroll[V])){ad.css({visibility:"hidden",display:"block"});var X={};for(k in H){X[k]=H[k]}var aa=$(W).children("*");var Z=aa.length===1;if(!Z){var ac=document.createElement("div");ac.className=L+"created";ac.style.width="100%";for(var Y=0,ab=W.children.length;Y<ab;Y++){ac.appendChild(W.children[Y])}W.appendChild(ac)}else{aa[0].style.width="100%"}J[V]=new iScroll(V,X);ad.bind("touchstart",{id:V},function(ae){var af=ae.data.id;J[af].refresh.call(J[af])});ad.css({display:"none",visibility:"visible"})}}}}};this.init=function(V){G=V;M=$(document.body);P=typeof j!="undefined"&&j||window.TouchyJS;L="touchyjs-";E=L+"content";D=L+"header";R=L+"scrollable";$contents=M.children("."+E);if($contents.length>0){I($contents);var W=G.displayContent||0,X=$contents[W];$(X).css("display","block");P.Nav.setCurrent(X)}};function N(){document.body.removeEventListener("touchstart",N);var V=P.Nav.getCurrent();$(V).css("height",window.screen&&window.screen.availHeight+"px"||"1000px");window.scrollTo(0,0);setTimeout(function(){K.refreshAll()},1000)}function I(W){W=W&&W.length?W:M.children("."+E);S=S||M.children("."+D);var V=S.length?S[0].offsetHeight:0,X=window.innerHeight-parseInt(M.css("margin-top"),10)-parseInt(M.css("margin-bottom"),10)-V;W.css({width:"100%",position:"absolute",height:X+"px",top:V+"px"});if(G.fixedPositioning){Q(G.fixedPositioning==="capableOnly")}}this.refresh=function(W,V){W=W||P.Nav.getCurrent().getAttribute("id");if(V){$("#"+W).children("*").css("height",V+"px")}if(J[W]){J[W].refresh()}};this.refreshAll=function(){I()};this.scrollTo=function(X){var V=P.Nav.getCurrent(),W=V.getAttribute("id");if(J[W]){J[W].scrollTo(0,X,0)}else{V.scrollTop=X}};this.disable=function(){var V=P.Nav.getCurrent(),W=V.getAttribute("id");if(J[W]){J[W].disable()}};this.enable=function(){var V=P.Nav.getCurrent(),W=V.getAttribute("id");if(J[W]){J[W].enable()}};var T=function(){if(!P.Env.isMobile()){return true}var V=P.Env.getInfo();p=V.platform,v=V.version;if(p==="iphone"||p==="ipad"){return U(v,"5")}else{if(p==="android"){return U(v,"2.2")}}return false};function U(Z,Y){var X=Z.split(".");var W=Y.split(".");for(var V=0;V<X.length;++V){if(W.length==V){return true}if(X[V]==W[V]){continue}else{if(parseInt(X[V],10)>parseInt(W[V],10)){return true}else{return false}}}if(X.length!=W.length){return false}return true}}function d(D,I,H){H&&H.info("platform="+D);var E=["scale","rotate","skew","translate","matrix"],G=I==="webkit"?"-webkit-":I==="mozilla"?"-moz-":"";J();$.fn.fadeIn=function(){var M=h(arguments);return $(this).animate({opacity:1},M.dur,M.ease,M.cb)};$.fn.fadeOut=function(){var M=h(arguments);return $(this).animate({opacity:0},M.dur,M.ease,M.cb)};$.fn.animate=function(){var U=this;var P,S,M,O,R=[];for(var Q=1;Q<arguments.length;Q++){var T=arguments[Q];if(typeof T==="function"){R.push(T)}else{if(T==="fast"||T==="slow"){M=T}else{if(typeof T==="string"){O=T}else{M=T}}}}S=arguments[0];S[G+"transform"]="";for(P in S){var N;if(S[P].toString().indexOf("=")!==-1){S[P]=L(U,P,S[P])}if(F(P)){S[G+"transform"]+=P+"("+S[P]+")";delete S[P]}else{if(P==="left"||P==="right"){N=(P==="right")?K(S[P]):S[P];S[G+"transform"]+="translateX("+N+")";delete S[P]}else{if(P==="bottom"||P==="top"){N=(P==="bottom")?K(S[P]):S[P];S[G+"transform"]+="translateY("+N+")";delete S[P]}}}}M=(M==="fast")?0.2:(M==="slow")?0.6:M/1000||0.3;O=(!O||O==="swing")?"ease-in-out":O;if(R.length>0){setTimeout(function(){var W,V=R.length;for(W=0;W<V;W++){R[W].call(U)}},M*1000)}S[G+"transition"]="all "+M+"s "+O;return U.css(S)};function F(M){for(var N=0;N<E.length;N++){if(M.indexOf(E[N])!==-1){return true;break}}return false}function K(M){M=M.toString();return(M.indexOf("-")===0)?M.substring(1,M.length):"-"+M}function L(N,Q,P){var T=(P.indexOf("-=")!==-1)?-1:1;P=P.toString();var M=parseInt(P.substring(2,P.length),10).toString();var O=P.substring(2+M.length,P.length);var S=N.css(Q);S=(S&&S!=="")?parseInt(S,10):0;var R=S+(T*M)+O;return R}function J(){var M={};if(D!=="android"){M[G+"transform"]="translate3d(0px, 0px, 0px) rotate(0deg) scale(1)";M[G+"box-sizing"]="border-box";M[G+"backface-visibility"]="hidden";H&&H.info("Including cfg['"+G+"transform'] = 'translate3d(0px, 0px, 0px) rotate(0deg) scale(1)'")}else{H&&H.info("not including cfg['"+G+"transform'] = 'translate3d(0px, 0px, 0px) rotate(0deg) scale(1)'")}$(".touchyjs-content").css(M)}}function h(E){var G={};for(var F=0;F<E.length;F++){var D=E[F];if(typeof D==="function"){G.cb=D}else{if(D==="fast"||D==="slow"){G.dur=D}else{if(typeof D==="string"){G.ease=D}else{G.dur=D}}}}return G}
/*!
             * JS Signals <http://millermedeiros.github.com/js-signals/>

             * Released under the MIT license <http://www.opensource.org/licenses/mit-license.php>
             * @author Miller Medeiros <http://millermedeiros.com/>
             * @version 0.6.3
             * @build 187 (07/11/2011 10:14 AM)
             */
(function(F){var D={VERSION:"0.6.3"};function G(H,I,K,J,L){this._listener=I;this._isOnce=K;this.context=J;this._signal=H;this._priority=L||0}G.prototype={active:true,params:null,execute:function(J){var H,I;if(this.active&&!!this._listener){I=this.params?this.params.concat(J):J;H=this._listener.apply(this.context,I);if(this._isOnce){this.detach()}}return H},detach:function(){return this.isBound()?this._signal.remove(this._listener):null},isBound:function(){return(!!this._signal&&!!this._listener)},getListener:function(){return this._listener},_destroy:function(){delete this._signal;delete this._listener;delete this.context},isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce: "+this._isOnce+", isBound: "+this.isBound()+", active: "+this.active+"]"}};function E(I,H){if(typeof I!=="function"){throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",H))}}D.Signal=function(){this._bindings=[]};D.Signal.prototype={_shouldPropagate:true,active:true,_registerListener:function(I,J,K,L){var M=this._indexOfListener(I),H;if(M!==-1){H=this._bindings[M];if(H.isOnce()!==J){throw new Error("You cannot add"+(J?"":"Once")+"() then add"+(!J?"":"Once")+"() the same listener without removing the relationship first.")}}else{H=new G(this,I,J,K,L);this._addBinding(H)}return H},_addBinding:function(I){var H=this._bindings.length;do{--H}while(this._bindings[H]&&I._priority<=this._bindings[H]._priority);this._bindings.splice(H+1,0,I)},_indexOfListener:function(I){var H=this._bindings.length;while(H--){if(this._bindings[H]._listener===I){return H}}return -1},add:function(H,I,J){E(H,"add");return this._registerListener(H,false,I,J)},addOnce:function(H,I,J){E(H,"addOnce");return this._registerListener(H,true,I,J)},remove:function(H){E(H,"remove");var I=this._indexOfListener(H);if(I!==-1){this._bindings[I]._destroy();this._bindings.splice(I,1)}return H},removeAll:function(){var H=this._bindings.length;while(H--){this._bindings[H]._destroy()}this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=false},dispatch:function(J){if(!this.active){return}var K=Array.prototype.slice.call(arguments),H=this._bindings.slice(),I=this._bindings.length;this._shouldPropagate=true;do{I--}while(H[I]&&this._shouldPropagate&&H[I].execute(K)!==false)},dispose:function(){this.removeAll();delete this._bindings},toString:function(){return"[Signal active: "+this.active+" numListeners: "+this.getNumListeners()+"]"}};F.signals=D}(window||this));
/*!
 * Hasher <http://github.com/millermedeiros/hasher>

 * @author Miller Medeiros
 * @version 1.0.0 (2011/08/03 10:49 PM)
 * Released under the MIT License
 */
var e=(function(V){var R=25,Q=V.document,ad=V.location,S=V.history,K=signals.Signal,aa,L,T,N,ab,E,O=/#(.*)$/,W=/(\?.*)|(\#.*)/,Z=/^\#/,X=(!+"\v1"),G=("onhashchange" in V),ac=X&&!G,P=(ad.protocol==="file:");function M(ae){if(!ae){return""}var af=new RegExp("^\\"+aa.prependHash+"|\\"+aa.appendHash+"$","g");return ae.replace(af,"")}function D(){var ae=O.exec(aa.getURL());return(ae&&ae[1])?decodeURIComponent(ae[1]):""}function H(){return(ab)?ab.contentWindow.frameHash:null}function I(){ab=Q.createElement("iframe");ab.src="about:blank";ab.style.display="none";Q.body.appendChild(ab)}function Y(){if(ab&&L!==H()){var ae=ab.contentWindow.document;ae.open();ae.write("<html><head><title>"+Q.title+'</title><script type="text/javascript">var frameHash="'+L+'";<\/script></head><body>&nbsp;</body></html>');ae.close()}}function U(af){af=decodeURIComponent(af);if(L!==af){var ae=L;L=af;if(ac){Y()}aa.changed.dispatch(M(af),M(ae))}}E=(ac)?function(){var ae=D(),af=H();if(af!==L&&af!==ae){aa.setHash(M(af))}else{if(ae!==L){U(ae)}}}:function(){var ae=D();if(ae!==L){U(ae)}};function F(ae,ag,af){if(ae.addEventListener){ae.addEventListener(ag,af,false)}else{if(ae.attachEvent){ae.attachEvent("on"+ag,af)}}}function J(ae,ag,af){if(ae.removeEventListener){ae.removeEventListener(ag,af,false)}else{if(ae.detachEvent){ae.detachEvent("on"+ag,af)}}}aa={VERSION:"1.0.0",appendHash:"",prependHash:"/",separator:"/",changed:new K(),stopped:new K(),initialized:new K(),init:function(){if(N){return}L=D();if(G){F(V,"hashchange",E)}else{if(ac){if(!ab){I()}Y()}T=setInterval(E,R)}N=true;aa.initialized.dispatch(M(L))},stop:function(){if(!N){return}if(G){J(V,"hashchange",E)}else{clearInterval(T);T=null}N=false;aa.stopped.dispatch(M(L))},isActive:function(){return N},getURL:function(){return ad.href},getBaseURL:function(){return aa.getURL().replace(W,"")},setHash:function(af){var ae=Array.prototype.slice.call(arguments);af=ae.join(aa.separator);af=af?aa.prependHash+af.replace(Z,"")+aa.appendHash:af;if(af!==L){U(af);if(X&&P){af=af.replace(/\?/,"%3F")}ad.hash="#"+encodeURI(af)}},getHash:function(){return M(L)},getHashAsArray:function(){return aa.getHash().split(aa.separator)},dispose:function(){aa.stop();aa.initialized.dispose();aa.stopped.dispose();aa.changed.dispose();ab=aa=V.hasher=null},toString:function(){return'[hasher version="'+aa.VERSION+'" hash="'+aa.getHash()+'"]'}};return aa}(window));(function(ag,G,N){var D="width",S="length",ai="radius",ab="lines",U="trail",X="color",at="opacity",ak="speed",ac="shadow",am="style",F="height",H="left",I="top",J="px",V="childNodes",ar="firstChild",K="parentNode",af="position",L="relative",ad="absolute",ax="animation",Y="transform",P="Origin",ah="Timeout",R="coord",ao="#000",Z=am+"Sheets",O="webkit0Moz0ms0O".split(0),aw={},aq;function av(az,aB){var ay=~~((az[S]-1)/2);for(var aA=1;aA<=ay;aA++){aB(az[aA*2-1],az[aA*2])}}function ap(ay){var az=G.createElement(ay||"div");av(arguments,function(aB,aA){az[aB]=aA});return az}function ae(ay,aA,az){if(az&&!az[K]){ae(ay,az)}ay.insertBefore(aA,az||null);return ay}ae(G.getElementsByTagName("head")[0],ap(am));var Q=G[Z][G[Z][S]-1];function E(aD,ay){var aA=[at,ay,~~(aD*100)].join("-"),az="{"+at+":"+aD+"}",aB;if(!aw[aA]){for(aB=0;aB<O[S];aB++){try{Q.insertRule("@"+(O[aB]&&"-"+O[aB].toLowerCase()+"-"||"")+"keyframes "+aA+"{0%{"+at+":1}"+ay+"%"+az+"to"+az+"}",Q.cssRules[S])}catch(aC){}}aw[aA]=1}return aA}function T(aB,aC){var aA=aB[am],ay,az;if(aA[aC]!==N){return aC}aC=aC.charAt(0).toUpperCase()+aC.slice(1);for(az=0;az<O[S];az++){ay=O[az]+aC;if(aA[ay]!==N){return ay}}}function aj(ay){av(arguments,function(aA,az){ay[am][T(ay,aA)||aA]=az});return ay}function aa(ay){av(arguments,function(aA,az){if(ay[aA]===N){ay[aA]=az}});return ay}var W=function W(ay){this.opts=aa(ay||{},ab,12,U,100,S,7,D,5,ai,10,X,ao,at,1/4,ak,1)},M=W.prototype={spin:function(aE){var aG=this,az=aG.el=aG[ab](aG.opts);if(aE){ae(aE,aj(az,H,~~(aE.offsetWidth/2)+J,I,~~(aE.offsetHeight/2)+J),aE[ar])}if(!aq){var ay=aG.opts,aB=0,aC=20/ay[ak],aD=(1-ay[at])/(aC*ay[U]/100),aF=aC/ay[ab];(function aA(){aB++;for(var aH=ay[ab];aH;aH--){var aI=Math.max(1-(aB+aH*aF)%aC*aD,ay[at]);aG[at](az,ay[ab]-aH,aI,ay)}aG[ah]=aG.el&&ag["set"+ah](aA,50)})()}return aG},stop:function(){var ay=this,az=ay.el;ag["clear"+ah](ay[ah]);if(az&&az[K]){az[K].removeChild(az)}ay.el=N;return ay}};M[ab]=function(aD){var aB=aj(ap(),af,L),aA=E(aD[at],aD[U]),az=0,ay;function aC(aE,aF){return aj(ap(),af,ad,D,(aD[S]+aD[D])+J,F,aD[D]+J,"background",aE,"boxShadow",aF,Y+P,H,Y,"rotate("+~~(360/aD[ab]*az)+"deg) translate("+aD[ai]+J+",0)","borderRadius","100em")}for(;az<aD[ab];az++){ay=aj(ap(),af,ad,I,1+~(aD[D]/2)+J,Y,"translate3d(0,0,0)",ax,aA+" "+1/aD[ak]+"s linear infinite "+(1/aD[ab]/aD[ak]*az-1/aD[ak])+"s");if(aD[ac]){ae(ay,aj(aC(ao,"0 0 4px "+ao),I,2+J))}ae(aB,ae(ay,aC(aD[X],"0 0 1px rgba(0,0,0,.1)")))}return aB};M[at]=function(az,ay,aA){az[V][ay][am][at]=aA};var au="behavior",an="url(#default#VML)",al="group0roundrect0fill0stroke".split(0);(function(){var az=aj(ap(al[0]),au,an),ay;if(!T(az,Y)&&az.adj){for(ay=0;ay<al[S];ay++){Q.addRule(al[ay],au+":"+an)}M[ab]=function(){var aH=this.opts,aF=aH[S]+aH[D],aD=2*aF;function aA(){return aj(ap(al[0],R+"size",aD+" "+aD,R+P,-aF+" "+-aF),D,aD,F,aD)}var aE=aA(),aG=~(aH[S]+aH[ai]+aH[D])+J,aC;function aB(aJ,aI,aK){ae(aE,ae(aj(aA(),"rotation",360/aH[ab]*aJ+"deg",H,~~aI),ae(aj(ap(al[1],"arcsize",1),D,aF,F,aH[D],H,aH[ai],I,-aH[D]/2,"filter",aK),ap(al[2],X,aH[X],at,aH[at]),ap(al[3],at,0))))}if(aH[ac]){for(aC=1;aC<=aH[ab];aC++){aB(aC,-2,"progid:DXImage"+Y+".Microsoft.Blur(pixel"+ai+"=2,make"+ac+"=1,"+ac+at+"=.3)")}}for(aC=1;aC<=aH[ab];aC++){aB(aC)}return ae(aj(ap(),"margin",aG+" 0 0 "+aG,af,L),aE)};M[at]=function(aB,aA,aD,aC){aC=aC[ac]&&aC[ab]||0;aB[ar][V][aA+aC][ar][ar][at]=aD}}else{aq=T(az,ax)}})();ag.Spinner=W})(window,document);var x=function(){var U="touchyjs-",S=j.Env.isMobile(),X,Q,G,K={},D={},R={},ad,T=true,N=false,M,E;var ac=j.Env.getInfo().browser.name||j.Env.getInfo().browser;ad=ac==="webkit"?"-webkit-":ac==="mozilla"?"-moz-":"";var W=function(ag){ag&&(K=l(K,ag));if(K.browserHistory){O()}};var F=function(){var ah=arguments;var ai=(typeof ah[0]==="string")?ah[0]:ah[0].get?ah[0].get(0).getAttribute("id"):ah[0].getAttribute("id"),ak=ah[1],aj=(typeof ah[2]==="string")?ah[2].toLowerCase():"oncomplete",ag=(typeof ah[2]==="string")?ah[3]:ah[2];D[ai]=D[ai]||{};D[ai][aj]=D[ai][aj]||{};D[ai][aj][ak]=ag};var aa=function(an,ao,ah){if(!an||N){return false}N=true;var am=(an.constructor===String)?$("."+U+"content#"+an):$(an);if(!ah){Z(am,ao)}if(X[0].id==am[0].id&&X.css("display")=="block"){ab(am,ao);return false}else{if(ao&&ao.transition=="none"){var aj={left:"0%",display:"block"};aj[ad+"transition-duration"]="0";aj[ad+"transform"]="translateX(0)";am.css(aj);X.css({display:"none"});ab(am,ao)}else{if(ao&&ao.transition=="fade"){X.css("z-index",2);if(S){am.css(ad+"transition-duration","0");am.css(ad+"transform","translateX(0)")}else{am.css("left",0)}am.css("display","block");X.css(ad+"transition","opacity 0.5s linear").css("opacity",0);setTimeout(function(){X.css("display","none").css(ad+"transition-duration","0").css({"z-index":1,opacity:1});ab(am,ao)},200)}else{var al=ao&&ao.direction||ae(am),ag=(al==="rtl")?"100%":"-100%",ai=(al==="rtl")?"-100%":"100%";if(S){am.css(ad+"transition-duration","0");am.css(ad+"transform","translateX("+ag+")")}else{am.css("left",ag)}am.css("display","block");setTimeout(function(){am.animate({left:"0%"});X.animate({left:ai},function(){ab(am,ao)})},200)}}}if(!ao||ao.muteEventReport!==true){var ak={action:"Navigate",to:am[0].id};if(ao&&ao.title){ak.title=ao.title.replace("/","-")}if(ao&&ao.id&&ao.id.replace){ak.id=ao.id.replace("/","-")}if(j.Messenger){j.Messenger.trigger(j.Events.USER_ACTION,ak)}}return true};var V=function(){if(K.browserHistory){history.back()}else{af(Q,{muteEventReport:true})}};var af=function(ai,ah,aj){if(K.browserHistory){var ag=(ai.constructor===String)?$("."+U+"content#"+ai):$(ai);var ak="";if(ah){if(ah.url){ak="/"+ah.url}else{if(ah.id){ak="/"+ah.id}}}E=ah;e.setHash(ag[0].id+ak)}else{aa.apply(this,arguments)}};var Z=function(ag,ah){var aj=X[0].id,ai=ag[0].id;if(aj!=ai){if(D[ai]&&D[ai]["onstart"]&&D[ai]["onstart"]["in"]){D[ai]["onstart"]["in"](X[0],ag[0])}if(D[aj]&&D[aj]["onstart"]&&D[aj]["onstart"]["out"]){D[aj]["onstart"]["out"](X[0],ag[0])}}if(ah&&ah.onStart){ah.onStart(X[0],ag[0])}};var ab=function(ag,ah){var aj=X[0].id,ai=ag[0].id;Q=X;X=ag;if(aj!=ai){Q.css("display","none");if(D[ai]&&D[ai]["oncomplete"]&&D[ai]["oncomplete"]["in"]){D[ai]["oncomplete"]["in"](X[0],Q[0])}if(D[aj]&&D[aj]["oncomplete"]&&D[aj]["oncomplete"]["out"]){D[aj]["oncomplete"]["out"](X[0],Q[0])}}if(ah&&ah.onComplete){ah.onComplete(X[0],Q[0])}N=false};var ae=function(ag){var ah=H(ag);var ai=(ah&&ah!==""&&ah!=="none")?(ah==="translateX(-100%)"):(ag.get(0).style.left==="-100%");return ai?"ltr":"rtl"};var H=function(ah){var ag=ah.css(ad+"transform"),ai=ah[0].style[ad+"transform"];return ag&&ag!==""&&ag!=="none"?ag:ai};var J=function(ag){if(ag.constructor===String){X=$("#"+ag)}else{X=$(ag)}!M&&(M=ag.id)};var L=function(){return X[0]};var Y=function(){if(X&&G!==X[0].offsetHeight){G=X[0].offsetHeight;return G}return false};var I=function(ai,ah){if(typeof ai=="function"){ah=ai;ai=["__default"]}else{if(typeof ai=="string"){if(ai==""){ai="__empty"}ai=[ai]}}for(var ag=0;ag<ai.length;ag++){var aj=ai[ag];if(!R[aj]){R[aj]=[]}R[aj].push(ah)}};var P=function(ai){var ak=ai.split("/"),aj="__empty";if(ak.length>0&&ak[0]!=""){aj=ak[0]}ak.splice(0,1);if(!R[aj]){R[aj]=[]}if(!R.__default){R.__default=[]}var ag=R[aj].concat(R.__default);if(aj=="__empty"){aj=M}if(T){aa(aj,{transition:"none"},true);T=false}else{aa(aj,E,true)}for(var ah=0;ah<ag.length;ah++){ag[ah](aj,ak)}};var O=function(){e.changed.add(P);e.initialized.add(P);e.init()};return{init:W,goTo:af,back:V,attachCallback:F,initAddress:O,changed:I,setCurrent:J,getCurrent:L,hasNewContentHeight:Y,Indicator:new f()}};function f(){var G,I,E,J={lines:10,length:7,width:3,radius:7,color:"#ffffff",speed:1.4,trail:72,shadow:true,parent:document.body},D={position:"absolute",left:"50%",top:"150px","z-index":200};var H=function(L){var K={};for(i in J){K[i]=J[i]}for(i in L){K[i]=L[i]}I=new Spinner(K);I.spin(K.parent)};var F=function(){$mainEl=$('<span class="touchyjs-progress-indicator" />');$mainEl.css(D);$(document.body).append($mainEl);E=$mainEl[0];G=new Spinner(J)};this.show=function(K){if(K){H(K)}else{if(!G){F()}G.spin(E)}};this.hide=function(){if(I){I.stop()}if(G){G.stop()}}}function s(F,L,J,M,H){var K=L?L.ownerDocument:document;var E=K.createElement(F);if(J){for(var D in J){if(D=="style"){var O=J[D];for(var P in O){E.style.setProperty(P,O[P])}}else{E[D]=J[D]}}}if(M&&F=="script"){var G=false;var N=function(){if(G){return}G=true;M()};E.onload=N;E.onreadystatechange=function(){if(this.readyState=="loaded"){N()}}}if(L){try{L.insertBefore(E,H)}catch(I){L.insertBefore(E)}}return E}function m(){var D={};(location.search||"").replace(/(?:[?&]|^)([^=]+)=([^&]*)/g,function(G,F,E){D[F]=E});return D}function n(H,F,G){var D=function(K,I,J){K[J]=function(){return I[J].apply(I,arguments)}};for(var E in G){D(H,F,G[E])}}function b(D){if(!D){return D}var F=D.length,H=[],G={};while(F--){var E=D[F];if(!G[E]){G[E]=true;H.push(E)}}return H}function l(F,E){F=F||{};for(var D in E){F[D]=E[D]}return F}function t(F,D){var E=F.className;D=E!==""?" "+D:D;F.className+=D}function y(D){if(D.trim){return D.trim()}else{return D.replace(/^\s+|\s+$/g,"")}}function r(){if(typeof arguments[0]==="string"){arguments[2]=arguments[1];arguments[1]=arguments[0];arguments[0]=document}var F=arguments[0],E=arguments[1],D=arguments[2];if(typeof F.addEventListener!=="undefined"){F.addEventListener(E,D,false)}else{if(F.attachEvent){F.attachEvent("on"+E,D,false)}}}function g(){if(typeof arguments[0]==="string"){arguments[2]=arguments[1];arguments[1]=arguments[0];arguments[0]=document}var F=arguments[0],E=arguments[1],D=arguments[2];if(typeof F.removeEventListener!=="undefined"){F.removeEventListener(E,D,false)}else{if(F.detachEvent){F.detachEvent("on"+E,D)}}}function u(){var T=this,J,Q=document.getElementsByTagName("HEAD")[0],K,P,G,H,F,L,E,R,O={};if(window.touchyjsConfig){O=l(O,touchyjsConfig)}this.init=S;this.renderHTML=M;this.openLink=I;this.getSearchQuery=D;this.visible=this.focused=false;this.Log=typeof Logger!=="undefined"&&new Logger()||null;this.Events=new A();P=new C();this.Env=this.Environment=P;R=P.getInfo();if(P.isMobile()){s("META",Q,{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"});if(R.platform.name==="iphone"){s("META",Q,{name:"apple-mobile-web-app-capable",content:"yes"})}}var N=function(Y,V){if(!V){return Y}for(var U in V){var X=new RegExp("{"+U+"}","g");var W=V[U];Y=Y.replace(X,W)}return Y};function S(){J=$(document);K=new c();T.DOML=K;H=new a({searchClearButton:O.searchClearButton});T.Searchbar=H;L=new q();T.Slider=L;E=new B();T.Swiper=E;F=new z();T.Scroll=F;G=new x();T.Nav=G;T.Events.focused(function(){O.hasHost=true;T.focused=true});T.Events.blurred(function(){T.focused=false});T.Events.visible(function(){T.visible=true});T.Events.hidden(function(){T.visible=false});J.ready(function(){K.parse();F.init(O);G.init(O);t(document.body,R.platform.name+" "+R.browser.name);t(document.body,P.isTouch()?"touch":"no-touch");if(P.isMobile()){if(O.webkitAnimation!==false){d(R.platform.name,R.browser.name,T.Log)}}$("body").bind("click",function(X){var W=X.target||X.originalTarget;var V="";if(W){if(W.nodeName){V=W.nodeName}if(W.className!=""){V+="."+W.className}if(W.id!=""){V+="#"+W.id}if(W.firstChild&&W.firstChild.nodeType===3){var Z=W.firstChild.nodeValue;Z=y(Z);if(Z!==""){V+=' ("'+Z+'")'}}if(W.getAttribute("alt")&&W.getAttribute("alt")!==""){var Y=W.getAttribute("alt");Y=y(Y);V+=' ("'+Y+'")'}}});T.Events.dispatchEvent("ready",{callOnce:true})});var U=m();T.params={};T.params.query=U.do_query?decodeURIComponent(U.do_query):"";T.params.experience=U.do_experience?decodeURIComponent(U.do_experience):"";T.params.platform=U.do_platform?U.do_platform:"";T.params.attributes=U.do_attr?JSON.parse(decodeURIComponent(U.do_attr)):{}}function D(){return T.params.query}function M(Z,Y){var V;if(typeof Z==="string"){V=Z}else{var aa="",U=P.getInfo().platform;for(k in Z){var X=k.split(",");for(var W=0;W<X.length;W++){if(X[W]===U){V=Z[k];break}else{if(X[W]==="default"){aa=Z[k]}}}if(!V){V=aa}}}return N(V,Y)}function I(ag,aj){var Y,Z=P.getInfo().platform,ah=P.isMobile(),ak=aj||{};function ab(al){return encodeURIComponent(encodeURIComponent(al))}function ac(al){if(typeof al==="string"){al={url:al,newWindow:(!ah),label:((al.indexOf("itms-apps://")!==-1||al.indexOf("itms://")!==-1||al.indexOf("http://itunes.apple.com")!==-1)?"Download from App Store":(al.indexOf("http://")!==0&&al.indexOf("https://")!==0)?"Launch installed app":al)}}return al}function af(am){if(!am){return am}var ao;am=(am instanceof Array)?am:[am];if(ah){ao={url:"doatJS://OpenLink"};for(var an=0,al=am.length;an<al;an++){var ap=ac(am[an]);if(ap.newWindow&&ap.url.indexOf("http")===0){ap.url="doatBrowser://"+ap.url}ap.url=ab(ap.url);ao.url+="/"+ap.url}}else{ao=ac(am[0])}return ao}for(platform in ag){var aa=platform.split(",");for(var ad=0,X=aa.length;ad<X;ad++){if(y(aa[ad])===Z){Y=ag[platform];break}}if(Y){break}}if(O.hasHost===true){Y=af(Y||ag["default"]);if(Y){if(ak.debug){return Y.url}else{if(!ah&&Y.newWindow){window.open(Y.url,"_blank","status=no")}else{location.href=Y.url}return true}}}else{var ai=document.getElementById("alertView");if(!ai){var V="#doatOpenWin ul { list-style-type: none; }#doatOpenWin ul li { padding: 6px 0; }#doatOpenWin ul li a { color: #fff; text-decoration: none; font-size: 13px; }#alertView{text-align: center;width: 250px;position: absolute;left: 50%;margin-left: -135px;border: 2px solid #fff;border-radius: 20px;-moz-border-radius: 20px;-webkit-border-radius: 20px;background:  rgba(59, 80, 119, 0.9) ;box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);-moz-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);-webkit-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.5);overflow:hidden;z-index:1000;padding:10px;display:none;}#alertView div#shine {position: absolute;top: -1474px;height: 1500px;width: 1500px;border-radius: 1500px;-moz-border-radius: 1500px;-webkit-border-radius: 1500px;background: rgb(255, 255, 255);left: -626px;background: -webkit-gradient(linear,left bottom,left top,color-stop(0, rgba(59,81,119, 0.5)),color-stop(0.06, rgba(255,255,255, 0.5)));background:   -moz-linear-gradient(center bottom,rgba(59,81,119, 0.5) 0%,rgba(255,255,255, 0.5) 4%);opacity: 1;filter: alpha(opacity = 05);z-index: 5;}#alertView h2, #alertView p{color: white;margin: 0;padding: 5px 10px;font: 12px / 1.1em Helvetica, Arial, sans-serif;position: relative;z-index: 20;}#alertView h2{text-align:center;font: 18px / 1.1em Helvetica, Arial, sans-serif;}#alertView div.button.white{background: -webkit-gradient(linear,left bottom,left top,color-stop(0.13, rgb(62,73,101)),color-stop(0.43, rgb(62,73,101)),color-stop(1, rgb(221,222,224)));background: -moz-linear-gradient(center bottom,rgb(62,73,101) 13%,rgb(62,73,101) 43%,rgb(221,222,224) 100%);}#alertView div.button{margin: 0 auto 6px;background: rgb(69, 90, 129);border: 1px solid rgb(59, 80, 119);border: 1px solid rgba(59, 80, 119, 1);border-radius: 5px;-moz-border-radius: 5px;-webkit-border-radius: 5px;background: -webkit-gradient(linear,left bottom,left top,color-stop(0.13, rgb(62,73,101)),color-stop(0.43, rgb(62,73,101)),color-stop(1, rgb(221,222,224)));background: -moz-linear-gradient(center bottom,rgb(62,73,101) 13%,rgb(62,73,101) 43%,rgb(221,222,224) 100%);}#alertView div.button p{text-align: center;margin: 0;padding: 0;}#alertView div.button p a{color: #333333;color: rgba(255, 255, 255, 1);text-decoration: none;font: bold 14px/1.2em Helvetica, Arial, sans-serif;margin: 0;display: block;padding: 7px 0 10px;text-shadow: 0 1px 1px #5E5E5E;border-radius: 5px;-moz-border-radius: 5px;-webkit-border-radius: 5px;}#alertView div.button p a:active {-moz-box-shadow: 0 0 15px white;-webkit-box-shadow: 0 0 15px white;}";s("style",Q,{innerHTML:V});var W=document.createElement("div");W.id="doatOpenWin";var ai=document.createElement("div");ai.id="alertView";var ae="<h2>Launching "+document.title+" app</h2>";for(var ad=0;ad<Y.length;ad++){var U=ac(Y[ad]);ae+='<div class="button"><p><a href="'+U.url+'" '+((U.newWindow)?'target="_blank"':"")+">"+U.label+"</a></p></div>"}ae+='<div class="button" id="cancelButton"><p><a href="javascript://">Cancel</a></p></div>';ae+='<div id="shine"></div>';ai.innerHTML=ae;W.appendChild(ai);document.body.appendChild(W);W.querySelector("#cancelButton").addEventListener("click",function(){ai.style.display="none"},false)}ai.style.display="block";ai.style.top=document.body.scrollTop+40+"px"}}}var j=new u();if(!window.touchyjsConfig||!touchyjsConfig.manualInit){j.init()}window.TouchyJS=j})();